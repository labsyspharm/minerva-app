import foobarIpsum from 'foobar-ipsum'

class UUID {
  // https://www.uuidtools.com/api/generate/v4/count/100
  static test_uuids = ["d9bb0b8f-cb8b-4968-a339-f424eb140517","671b915c-14e2-4f96-af7b-3ec6e9b86557","0dc8a288-a805-4291-8cbc-3002da05f9ca","82957bae-5b40-4ba3-8887-a2d8317ccfc6","b4ff0ace-52ed-4698-9c27-4242443d7124","bec070ad-971b-495a-9c69-c184ff496956","0f2d04ba-ac61-4c54-a880-ad5e08fd1920","0d2eefde-6d12-428a-824c-6d6211429b9f","0fd70721-0897-432b-9490-527b673369c5","997ac689-9089-4b48-bf1e-cb826c80c993","1e56ecc0-ccd8-4a91-881e-6869b77596cd","66033d2b-5d93-4c21-bd86-33069d4eb7d9","9d16cc8a-7bc3-4d4b-9422-97f01c4e1553","12f5777e-602f-4453-8960-c9630e3b7da4","1b04dde0-5f55-468c-9fde-fada483481ba","a096218c-1773-4b45-b346-992c1f1d03f8","335fa95e-ad5f-44cf-ac81-350ac1b83516","8293c29c-6893-4d9a-8e77-ce373b5c25ce","df53bccd-12cc-4977-bb31-ef5f0a1385ce","df48fe2d-412b-4eca-b593-c9a0dcb8b4a8","16903e33-1765-468a-b010-67522167a5ee","c7dcf78e-6e92-453e-878b-03d074cd46d4","74c4c811-592b-4763-a58b-4e8d49c01b96","13bf6122-e1d7-4cf7-ac76-f5c9d7468049","b1584b52-0919-4717-9cc3-d0e7025ecf09","eece288a-685c-402e-a0b4-3870e1698a43","59696c3f-d9f1-485a-8e9e-d387460a6d97","a1a70547-b5df-4b89-88db-ce8b588c2233","6bd55340-efb0-40ee-81ae-69712d322198","54cd8a89-87a1-4dee-9631-8e14a23ea6df","e574e34c-1185-414f-8065-26968b6c8585","957cc514-5c5e-4a50-8f4f-515266b28e4d","314c93f2-1614-415d-987c-f15c4d36f653","e78342b1-73de-4590-96cd-20654765356f","a6ef83a7-3b49-493b-9652-1786a6f65ab7","63a5ef4a-2464-4a3c-a515-1ae2d52cca2b","2db8a4a9-16c5-4a15-9e3d-a5d4a1507630","716ae88d-39b7-4bdf-a1f4-dd5407f4e43b","f5971a1f-1820-46e1-aa2d-975cdbf77a34","ebf55110-d7a8-404c-8b7d-aa99ee8645fa","f45ed8ac-9025-438f-862b-b2e46e14e906","bb562dd2-5567-4b74-94ce-eda4b4fdd13b","9339f157-a958-46cc-afea-6a9bade0619b","2f02090f-b710-4abe-a8a4-94948ee038c4","a53f64c4-f853-4276-a307-945dc1228150","9f16086e-9355-464c-9c6c-ca57ecbe5202","9d325cae-1827-493a-b93d-8ea45fb49a93","ff7dea9e-f7ad-4467-a87d-7e6240e1c805","16cff46a-8845-4638-9ef4-4075e8f82f1b","022c1662-30cc-4f52-a9fc-835a8a8f56c5","999551f4-ebcc-4da4-825b-02abce645ec6","bd12418f-386e-46ea-abb6-6c835b2a2b3e","695859da-9eda-4f22-aaea-311eb1433a43","d3aac04c-f803-465b-bfdc-a7ab4d8ed5c5","4a418b1f-a16a-414d-88e2-32c19ae453fa","d6d4fb2f-bffe-4285-9c9e-092990bcf91b","7b14b73b-221b-4786-ace7-8527eac08728","56f722be-d9a9-45ea-8206-214ab83572e2","37f8039b-2c8c-4987-9938-ecef43047666","faecda3f-42bf-4668-99c7-678dcde8be7e","534dfb6d-6de7-482a-afd2-af3aba164d4d","73cb0e8b-1e42-4cfd-8456-f787a979a585","d308b855-ffae-4d75-bb60-8a1ccea7c4e8","2af11bb5-5066-4771-b0d3-278dc3353073","1de2042d-2d64-4201-8782-eb4751efda7b","457982f2-1d7c-4ffa-8873-df53afdc244f","93491c10-09e5-43f6-b1c9-13f759c58fef","d98cb2b0-dd51-4fa9-ad63-51feabd80835","636af635-e382-4d97-8ddd-be5e36dc598d","12800204-627c-4d6c-a1da-20378cba3a18","10b12954-d813-4e83-a1fa-acbd778de682","f2bcdb9c-ded1-4d6a-bd7b-62ad690b3f07","6a7ed97b-8a0a-4c45-a5c3-ee09337c4acf","70209766-b138-487f-bdc3-2280eef2c37f","3e9a3a2b-28df-4734-9a63-8ae1ed52f0bd","0d0c0eea-f23f-4e52-b96e-fcd030e66a1b","08f54e91-576e-4ff9-b402-58e3d6c96baa","3277c800-6e7f-48e7-80b1-8aafc56c9d84","98897d4f-549b-492f-aaa3-58b352afbb13","3a0e8e90-48cc-41b7-8430-a1fe1f198910","a4205a1a-08d5-48eb-a772-6f2a1676077e","d1cb8c3f-3682-43c0-a707-6661c1c08872","f6db8e2d-8f1b-441a-a60d-1f8d7ddcb863","2a562ac9-cce2-4561-b9d9-4c50fec957d0","d53e8f8d-f9bb-4e51-9899-55f3cfa76ac2","33e03514-d35c-4ac1-bc41-49ef78b80c19","4dae4a62-94f5-4f51-a997-943a53508871","ed23e766-4bc8-42a2-8604-8b0649fd33f0","065ef803-a662-4718-ad8c-14df971a02cf","a4227808-9812-42a4-863b-986abf6d96ff","90fcf3e2-60f0-4054-9ad9-0fc20ea8bcef","fde6de0b-7116-4d94-ad31-9ae2cbb5bfff","1933228c-2a84-4577-9675-2913e14d4feb","77bf0272-da97-4584-92bc-826113eddce4","55baef45-4d72-44d0-a4b1-787ad86755a4","4cecb762-aadd-46e5-9338-2054f1e32934","9489f767-b3e7-4f72-a589-6ed66e2ae04d","960eb6a9-751c-4676-b7db-b648b01fefb4","11a2ae67-7216-4be9-846c-edef561dd652","a713cbca-be0d-4246-98e7-dbfdf8e8010e"]
  constructor() {
    this.uuid = UUID.test_uuids.pop()
    console.assert(!!this.uuid, 'Used all test UUIDs')
  }
}

const lorem = new foobarIpsum({
  size: {
    sentence: 5, paragraph: 6
  }
})

const to_image = () => {
  // TODO
  return { key: new UUID().uuid };
}

const to_channel = (image, index) => {
  return {
    key: new UUID().uuid,
    Properties: {
      Name: lorem.sentence(1), PixelType: 'UINT16',
      LowerRange: 0, UpperRange: 65535
    },
    Associations: {
      SourceImage: image.key,
      SourceIndex: index
    }
  }
}

const to_group = (expanded, channels=[]) => {
  return {
    expanded,
    key: new UUID().uuid,
    Properties: {
      Name: lorem.sentence(1)
    },
    Associations: {
      Channels: channels.map(({key}) => key)
    }
  }
}

const to_story = (expanded, length=1) => {
  return {
    expanded,
    key: new UUID().uuid,
    Properties: {
      Name: lorem.sentence(3),
      Content: [...new Array(length)].map(() => {
        return lorem.paragraph()
      }).join('\n\n')
    }
  }
}

const to_metadata_config = () => {
  const image = to_image();
  const n_channels = 24;
  const channels = [
    ...new Array(n_channels).keys()
  ].map(
    (_, i) => to_channel(image, i)
  );
  return {
    "name": "Example Story",
    "stories": [
      to_story(true, 1),
      to_story(false, 2),
      to_story(true, 3),
      to_story(false, 4)
    ],
    "channels": channels,
    "groups": [
      to_group(true, channels.slice(0,4)),
      to_group(true, channels.slice(4,8)),
      to_group(false, channels.slice(8,16)),
      to_group(false, channels.slice(16,24))
    ]
  };
}

const metadata_config = to_metadata_config();

export { metadata_config }
